<form #configurationForm="ngForm" name="configurationForm" (ngSubmit)="submit(configurationForm)">
  <div class="mt-2 mb-2">
    <app-custom-input [disabled]="loading" placeholder="mail.yandex.ru" [minlength]="1" [maxlength]="256"
      [required]="true" type="text" label="Адрес сервера" [(inputValue)]="configuration.server">
    </app-custom-input>
  </div>
  <div class="mt-2 mb-2">
    <app-custom-input [disabled]="loading" placeholder="no-reply@yandex.ru" [minlength]="1" [maxlength]="256"
      [required]="true" type="text" label="Имя учетной записи" [(inputValue)]="configuration.login">
    </app-custom-input>
  </div>
  <div class="mt-2 mb-2">
    <app-custom-input [disabled]="loading" placeholder="********" [minlength]="1" [maxlength]="70"
      [required]="true" [password]="true" type="password" label="Пароль" [(inputValue)]="configuration.password">
    </app-custom-input>
  </div>
  <div class="mt-2 mb-2">
    <app-custom-input [disabled]="loading" placeholder="no-reply@yandex.ru" [minlength]="2" [maxlength]="256"
      [required]="true" type="text" label="Электронная почта хоста" [(inputValue)]="configuration.hostEmailAddress">
    </app-custom-input>
  </div>
  <div class="mt-2 mb-2">
    <app-custom-input [disabled]="loading" placeholder="ООО Имя" [minlength]="2" [maxlength]="256"
      [required]="true" type="text" label="Отображаемое имя отправителя" [(inputValue)]="configuration.displayName">
    </app-custom-input>
  </div>
  <div class="mt-2 mb-2">
    <app-custom-input [disabled]="loading" placeholder="25" pattern="^[0-9]*$" [min]="1" [max]="65535"
      patternMessage="Только число от 1 до 65535"
      [required]="true" type="number" label="Порт" [(inputValue)]="configuration.port">
    </app-custom-input>
  </div>
  <mat-slide-toggle [disabled]="loading" ngModel name="enableSsl" [(ngModel)]="configuration.enableSsl">Разрешить SSL: {{configuration.enableSsl}}</mat-slide-toggle>
  <hr>
  <div class="mt-2 mb-2">
    <app-custom-input matTooltip="Количество потоков для одновременной отправки уведомлений." [min]="1" [max]="999" [disabled]="loading" placeholder="10" pattern="^[0-9]{1,3}"
      patternMessage="Только число от 1 до 999"
      [required]="true" type="number" label="Количество потоков" [(inputValue)]="configuration.threadCount">
    </app-custom-input>
  </div>
  <div class="mt-2 mb-2">
    <app-custom-input matTooltip="Установить размер пака для отправки, желательно кратно потокам. Сохранение данных будет происходить после каждой пачки. Не рекомендуется задавать большим." 
      [disabled]="loading" placeholder="25" pattern="^[0-9]*$" [min]="1" [max]="65535"
      [required]="true" type="number" label="Размер пачки для отправки" [(inputValue)]="configuration.emailPackSize">
    </app-custom-input>
  </div>
  <div class="mt-2 mb-2">
    <app-custom-input [disabled]="loading" placeholder="0" pattern="^[0-9]{1,3}" [min]="0" [max]="999"
      patternMessage="Только число от 0 до 999"
      [required]="true" type="number" label="Пауза между пачками в минутах" [(inputValue)]="configuration.threadSleep">
    </app-custom-input>
  </div>
  @if (loading) {
    <app-loading message="Сохранение данных и применение конфигурации ..."></app-loading>
  }
  @if(error)
  {
    <app-alert-danger class="view-error-danger f-14 mb-3 mt-3">
      <div>{{error}}</div>
    </app-alert-danger>
  }
  <hr>
  <div class="mt-2 mb-2">
    <button [disabled]="loading" class="btn btn-primary w-100" type="submit">Сохранить</button>
  </div>
</form>